2025-11-27 03:40:56,104 - INFO - [<module>:58] - [INIT] Gemini API configured successfully
2025-11-27 03:40:56,135 - INFO - [<module>:1155] - [START] Quiz Solver Service v6 - Gemini Edition
2025-11-27 03:40:56,136 - INFO - [<module>:1156] - [START] GEMINI_API_KEY configured: True
2025-11-27 03:40:56,136 - INFO - [<module>:1157] - [START] SECRET_KEY configured: True
2025-11-27 03:40:56,136 - INFO - [<module>:1158] - [START] LLM Provider: Google Gemini 2.5 Pro
2025-11-27 03:40:56,136 - INFO - [<module>:1159] - [START] Rate Limits: 15 req/min, 1M tokens/min, 1500 req/day
2025-11-27 03:40:56,137 - DEBUG - [__init__:64] - Using selector: KqueueSelector
2025-11-27 03:40:56,148 - INFO - [_serve:84] - Started server process [72349]
2025-11-27 03:40:56,148 - INFO - [startup:48] - Waiting for application startup.
2025-11-27 03:40:56,148 - INFO - [startup:62] - Application startup complete.
2025-11-27 03:40:56,149 - INFO - [_log_started_message:216] - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-11-27 03:41:04,669 - INFO - [receive_request:1107] - [API] POST /receive_request
2025-11-27 03:41:04,670 - INFO - [receive_request:1125] - [API] Valid request for 23f2000524@ds.study.iitm.ac.in
2025-11-27 03:41:04,670 - INFO - [send:473] - 127.0.0.1:49506 - "POST /receive_request HTTP/1.1" 200
2025-11-27 03:41:04,670 - INFO - [process_request:1060] - 
======================================================================
2025-11-27 03:41:04,670 - INFO - [process_request:1061] - [CHAIN] Starting for 23f2000524@ds.study.iitm.ac.in
2025-11-27 03:41:04,670 - INFO - [process_request:1062] - [CHAIN] Initial URL: http://tds-llm-analysis.s-anand.net/demo
2025-11-27 03:41:04,670 - INFO - [process_request:1063] - [CHAIN] Extended timeout: 300 seconds (5 minutes)
2025-11-27 03:41:04,670 - INFO - [process_request:1064] - [CHAIN] Using Gemini 2.5 Pro
2025-11-27 03:41:04,670 - INFO - [process_request:1065] - ======================================================================

2025-11-27 03:41:04,670 - INFO - [process_request:1081] - [CHAIN] Quiz 1/10 | 0.0s elapsed | 300.0s remaining
2025-11-27 03:41:04,670 - INFO - [process_quiz:991] - [QUIZ] Starting: http://tds-llm-analysis.s-anand.net/demo
2025-11-27 03:41:04,670 - DEBUG - [extract_url_params:79] - [CONTEXT] Extracted variables: {'EMAIL': '23f2000524@ds.study.iitm.ac.in'}
2025-11-27 03:41:04,670 - DEBUG - [process_quiz:996] - [QUIZ] Step 1: Fetch page
2025-11-27 03:41:04,670 - INFO - [fetch_page:133] - [FETCH] Starting fetch: http://tds-llm-analysis.s-anand.net/demo
2025-11-27 03:41:04,670 - DEBUG - [fetch_page:139] - [FETCH] Attempting static fetch
2025-11-27 03:41:04,726 - DEBUG - [atrace:87] - connect_tcp.started host='tds-llm-analysis.s-anand.net' port=80 local_address=None timeout=30.0 socket_options=None
2025-11-27 03:41:04,818 - DEBUG - [atrace:87] - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x11d5a02f0>
2025-11-27 03:41:04,818 - DEBUG - [atrace:87] - send_request_headers.started request=<Request [b'GET']>
2025-11-27 03:41:04,818 - DEBUG - [atrace:87] - send_request_headers.complete
2025-11-27 03:41:04,818 - DEBUG - [atrace:87] - send_request_body.started request=<Request [b'GET']>
2025-11-27 03:41:04,818 - DEBUG - [atrace:87] - send_request_body.complete
2025-11-27 03:41:04,818 - DEBUG - [atrace:87] - receive_response_headers.started request=<Request [b'GET']>
2025-11-27 03:41:04,844 - DEBUG - [atrace:87] - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 26 Nov 2025 22:11:04 GMT'), (b'Content-Type', b'text/html'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'CF-Cache-Status', b'HIT'), (b'Cache-Control', b'public, max-age=0, must-revalidate'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Vary', b'accept-encoding'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=xz0EPU0sMqzTe6z0qmhfvoC6B%2FFQJlOsYOpMQg9q1wIZdshXtwgJ7ONhbBDUZ9n6QL5%2BIMYLCvcsJZAXOfZ7pZBWeVX4F5hvm3zPq4qmzib064quTAM9mQQTlIA%3D"}]}'), (b'ETag', b'W/"ce08b59240a57c2e963ec19952224928"'), (b'Content-Encoding', b'gzip'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9a4cb8334fa1d14f-DEL'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-11-27 03:41:04,844 - DEBUG - [atrace:87] - receive_response_body.started request=<Request [b'GET']>
2025-11-27 03:41:04,844 - DEBUG - [atrace:87] - receive_response_body.complete
2025-11-27 03:41:04,844 - DEBUG - [atrace:87] - response_closed.started
2025-11-27 03:41:04,845 - DEBUG - [atrace:87] - response_closed.complete
2025-11-27 03:41:04,845 - DEBUG - [atrace:87] - close.started
2025-11-27 03:41:04,845 - DEBUG - [atrace:87] - close.complete
2025-11-27 03:41:04,845 - DEBUG - [fetch_page:144] - [FETCH] Static fetch successful: 336 bytes
2025-11-27 03:41:04,845 - DEBUG - [detect_dynamic_content:108] - [DETECT] Checking for dynamic content
2025-11-27 03:41:04,846 - DEBUG - [process_quiz:1002] - [QUIZ] Step 2: Extract data
2025-11-27 03:41:04,846 - INFO - [extract_data:240] - [EXTRACT] Parsing page data
2025-11-27 03:41:04,847 - DEBUG - [extract_data:269] - [EXTRACT] Found 0 links
2025-11-27 03:41:04,847 - DEBUG - [extract_data:283] - [EXTRACT] Found 0 tables
2025-11-27 03:41:04,847 - DEBUG - [extract_data:303] - [EXTRACT] Found 0 forms
2025-11-27 03:41:04,847 - DEBUG - [extract_base64_content:203] - [EXTRACT] Searching for base64 encoded content
2025-11-27 03:41:04,847 - DEBUG - [extract_file_metadata:218] - [EXTRACT] Extracting file metadata
2025-11-27 03:41:04,848 - DEBUG - [extract_data:312] - [EXTRACT] Found 0 files
2025-11-27 03:41:04,848 - DEBUG - [process_quiz:1005] - [QUIZ] Step 3: First LLM call - Understanding phase
2025-11-27 03:41:04,848 - INFO - [llm_understand:491] - [LLM_UNDERSTAND] ========== PHASE 1: UNDERSTANDING QUIZ ==========
2025-11-27 03:41:04,848 - INFO - [llm_understand:492] - [LLM_UNDERSTAND] Sending data to Gemini for analysis...
2025-11-27 03:41:04,848 - INFO - [llm_understand:534] - [LLM_UNDERSTAND] Calling Gemini 2.5 Pro with 4000 tokens...
2025-11-27 03:41:04,848 - DEBUG - [call_llm_gemini:329] - [GEMINI] Calling API with max_tokens=4000
2025-11-27 03:41:04,848 - DEBUG - [call_llm_gemini:355] - [GEMINI] Attempt 1/6
2025-11-27 03:41:04,849 - INFO - [call_llm_gemini:356] - [GEMINI] ⏳ Sending request to Gemini 2.5 Pro...
2025-11-27 03:41:04,849 - INFO - [call_llm_gemini:365] - [GEMINI] ⏳ WAITING FOR GEMINI TO ANALYZE AND RESPOND...
2025-11-27 03:41:33,325 - INFO - [call_llm_gemini:368] - [GEMINI] ✓ Received response from Gemini
2025-11-27 03:41:33,327 - DEBUG - [call_llm_gemini:402] - [GEMINI] Response content length: 698 chars
2025-11-27 03:41:33,327 - INFO - [call_llm_gemini:403] - [GEMINI] Response (first 300 chars): ```json
{
  "understanding": "The quiz requires an HTTP POST request to be sent to the `/submit` endpoint on the same host. The body of this request must be a JSON object containing four key-value pairs. The key `email` should be populated with the value from the context variable `$EMAIL`. The key `
2025-11-27 03:41:33,327 - DEBUG - [call_llm_gemini:412] - [GEMINI] Removed markdown code blocks
2025-11-27 03:41:33,327 - DEBUG - [call_llm_gemini:418] - [GEMINI] Attempting to parse JSON response
2025-11-27 03:41:33,327 - INFO - [call_llm_gemini:420] - [GEMINI] ✓ Successfully parsed JSON response
2025-11-27 03:41:33,327 - DEBUG - [call_llm_gemini:421] - [GEMINI] Parsed keys: ['understanding', 'needed_steps', 'final_required_action']
2025-11-27 03:41:33,328 - INFO - [llm_understand:538] - [LLM_UNDERSTAND] ✓ Understanding: The quiz requires an HTTP POST request to be sent to the `/submit` endpoint on the same host. The body of this request must be a JSON object containin
2025-11-27 03:41:33,328 - INFO - [llm_understand:539] - [LLM_UNDERSTAND] Required steps: 0 steps identified
2025-11-27 03:41:33,328 - INFO - [llm_understand:540] - [LLM_UNDERSTAND] ========== UNDERSTANDING PHASE COMPLETE ==========
2025-11-27 03:41:33,328 - DEBUG - [process_quiz:1011] - [QUIZ] Step 4: Perform steps if needed
2025-11-27 03:41:33,328 - DEBUG - [process_quiz:1027] - [QUIZ] Step 5: Second LLM call - Solving phase
2025-11-27 03:41:33,328 - INFO - [llm_solve:797] - [LLM_SOLVE] ========== PHASE 2: SOLVING QUIZ ==========
2025-11-27 03:41:33,328 - INFO - [llm_solve:798] - [LLM_SOLVE] Sending all data to Gemini for solving...
2025-11-27 03:41:33,328 - INFO - [llm_solve:883] - [LLM_SOLVE] Calling Gemini 2.5 Pro with 4000 tokens...
2025-11-27 03:41:33,328 - DEBUG - [call_llm_gemini:329] - [GEMINI] Calling API with max_tokens=4000
2025-11-27 03:41:33,328 - DEBUG - [call_llm_gemini:355] - [GEMINI] Attempt 1/6
2025-11-27 03:41:33,328 - INFO - [call_llm_gemini:356] - [GEMINI] ⏳ Sending request to Gemini 2.5 Pro...
2025-11-27 03:41:33,329 - INFO - [call_llm_gemini:365] - [GEMINI] ⏳ WAITING FOR GEMINI TO ANALYZE AND RESPOND...
2025-11-27 03:41:33,440 - WARNING - [call_llm_gemini:482] - [GEMINI] Error: PermissionDenied: 403 Your API key was reported as leaked. Please use another API key.
2025-11-27 03:41:33,440 - WARNING - [call_llm_gemini:483] - [GEMINI] Retry 1/5 after 2s
2025-11-27 03:41:35,441 - DEBUG - [call_llm_gemini:355] - [GEMINI] Attempt 2/6
2025-11-27 03:41:35,442 - INFO - [call_llm_gemini:356] - [GEMINI] ⏳ Sending request to Gemini 2.5 Pro...
2025-11-27 03:41:35,442 - INFO - [call_llm_gemini:365] - [GEMINI] ⏳ WAITING FOR GEMINI TO ANALYZE AND RESPOND...
2025-11-27 03:41:35,562 - WARNING - [call_llm_gemini:482] - [GEMINI] Error: PermissionDenied: 403 Your API key was reported as leaked. Please use another API key.
2025-11-27 03:41:35,563 - WARNING - [call_llm_gemini:483] - [GEMINI] Retry 2/5 after 4s
2025-11-27 03:41:39,564 - DEBUG - [call_llm_gemini:355] - [GEMINI] Attempt 3/6
2025-11-27 03:41:39,565 - INFO - [call_llm_gemini:356] - [GEMINI] ⏳ Sending request to Gemini 2.5 Pro...
2025-11-27 03:41:39,565 - INFO - [call_llm_gemini:365] - [GEMINI] ⏳ WAITING FOR GEMINI TO ANALYZE AND RESPOND...
2025-11-27 03:41:39,683 - WARNING - [call_llm_gemini:482] - [GEMINI] Error: PermissionDenied: 403 Your API key was reported as leaked. Please use another API key.
2025-11-27 03:41:39,683 - WARNING - [call_llm_gemini:483] - [GEMINI] Retry 3/5 after 8s
2025-11-27 03:41:43,150 - INFO - [shutdown:264] - Shutting down
2025-11-27 03:41:43,252 - INFO - [_wait_tasks_to_complete:306] - Waiting for background tasks to complete. (CTRL+C to force quit)
2025-11-27 03:41:47,685 - DEBUG - [call_llm_gemini:355] - [GEMINI] Attempt 4/6
2025-11-27 03:41:47,687 - INFO - [call_llm_gemini:356] - [GEMINI] ⏳ Sending request to Gemini 2.5 Pro...
2025-11-27 03:41:47,688 - INFO - [call_llm_gemini:365] - [GEMINI] ⏳ WAITING FOR GEMINI TO ANALYZE AND RESPOND...
2025-11-27 03:41:47,806 - WARNING - [call_llm_gemini:482] - [GEMINI] Error: PermissionDenied: 403 Your API key was reported as leaked. Please use another API key.
2025-11-27 03:41:47,806 - WARNING - [call_llm_gemini:483] - [GEMINI] Retry 4/5 after 16s
2025-11-27 03:42:03,807 - DEBUG - [call_llm_gemini:355] - [GEMINI] Attempt 5/6
2025-11-27 03:42:03,808 - INFO - [call_llm_gemini:356] - [GEMINI] ⏳ Sending request to Gemini 2.5 Pro...
2025-11-27 03:42:03,809 - INFO - [call_llm_gemini:365] - [GEMINI] ⏳ WAITING FOR GEMINI TO ANALYZE AND RESPOND...
2025-11-27 03:42:03,938 - WARNING - [call_llm_gemini:482] - [GEMINI] Error: PermissionDenied: 403 Your API key was reported as leaked. Please use another API key.
2025-11-27 03:42:03,938 - WARNING - [call_llm_gemini:483] - [GEMINI] Retry 5/5 after 32s
2025-11-27 03:42:35,942 - DEBUG - [call_llm_gemini:355] - [GEMINI] Attempt 6/6
2025-11-27 03:42:35,944 - INFO - [call_llm_gemini:356] - [GEMINI] ⏳ Sending request to Gemini 2.5 Pro...
2025-11-27 03:42:35,947 - INFO - [call_llm_gemini:365] - [GEMINI] ⏳ WAITING FOR GEMINI TO ANALYZE AND RESPOND...
2025-11-27 03:42:36,077 - ERROR - [call_llm_gemini:478] - [GEMINI] Error after 5 retries: 403 Your API key was reported as leaked. Please use another API key.
2025-11-27 03:42:36,078 - ERROR - [llm_solve:887] - [LLM_SOLVE] ✗ Gemini returned None
2025-11-27 03:42:36,078 - ERROR - [process_quiz:1030] - [QUIZ] Solving phase failed
2025-11-27 03:42:36,078 - ERROR - [process_request:1087] - [CHAIN] Quiz failed
2025-11-27 03:42:36,078 - INFO - [process_request:1101] - 
======================================================================
2025-11-27 03:42:36,078 - INFO - [process_request:1102] - [CHAIN] Completed 0 quizzes in 91.4s
2025-11-27 03:42:36,078 - INFO - [process_request:1103] - ======================================================================

2025-11-27 03:42:36,162 - INFO - [shutdown:67] - Waiting for application shutdown.
2025-11-27 03:42:36,164 - INFO - [shutdown:76] - Application shutdown complete.
2025-11-27 03:42:36,164 - INFO - [_serve:94] - Finished server process [72349]
